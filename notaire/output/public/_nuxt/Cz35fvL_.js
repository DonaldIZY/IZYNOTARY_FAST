import{_ as w}from"./ClAYQHhI.js";import{_ as P}from"./jk-e8p3X.js";import{V as h,_ as k}from"./DAOtDWvy.js";import{_ as O}from"./D1tss4Vx.js";import{r as n,D as z,F as L,v as q,x as m,z as l,A as t,N as S,L as s,J as G,t as j,a4 as T,M as u,B as x,a1 as f}from"./DXnXjm7K.js";import{p as H}from"./eMPb1Mbx.js";import{V as g,a as r}from"./B8Rr4oru.js";import{V as $}from"./BWQEG_-l.js";import{a as J}from"./BS0uIqYZ.js";import"./B22xuEom.js";import"./CSLxKgvM.js";import"./aLweXgft.js";import"./CHercgjs.js";import"./Ctz4MgHs.js";const K={class:"ma-4"},Q={class:"ma-2"},W={class:"d-flex flex-column justify-center"},X={class:"ma-4 d-flex justify-end"},A="http://serverizynotary.izydr.net",pe={__name:"transferOfMovableProperty",setup(Y){const c=n(!1),U=n(!1),C=n([]),v=n(null),d=n(null),b=n(""),N=n(""),_=n(""),V=n(""),y=n(""),E=n(null),I=n(null),B=()=>{c.value=!c.value},M=async()=>{try{const a=await $fetch(`${A}/customers`);a&&(C.value=a.map(e=>({ID:e.id,LASTNAME:e.lastName,FIRSTNAME:e.firstName,NAME:e.lastName+" "+e.firstName,IDENTIFICATION_NUMBER:e.identificationNumber,BIRTHDATE:e.birthDate,GENDER:e.gender})))}catch(a){console.error("Erreur lors du chargement des clients :",a)}};M(),z(()=>{c.value||M()}),L(v,a=>{d.value=C.value.find(e=>e.ID===a.ID),d.value&&(N.value=d.value.LASTNAME,b.value=d.value.FIRSTNAME,_.value=new Date(d.value.BIRTHDATE).toLocaleDateString(),V.value=d.value.GENDER,y.value=d.value.IDENTIFICATION_NUMBER)});const F=async()=>{const a=new FormData,D=(await $fetch(`${A}/folders`)).length;if(isNaN(D)){console.error("Erreur : count est NaN");return}a.append("folderNum",H("Succession de biens mobiliers",D)),a.append("procedureType","Succession de biens mobiliers"),a.append("progression",1/5),a.append("status","En cours"),a.append("customerId",d.value.ID);const p={customerCNI:E.value,birthCertificate:I.value};for(const i in p)p[i]&&a.append(`${i}`,p[i]);try{const i=await $fetch(`${A}/folders/transferOfMovableProperty`,{method:"POST",body:a});alert("Procédure créée avec succès.")}catch(i){console.error("Erreur lors de la création de la procédure :",i)}};return(a,e)=>{const D=w,p=P,i=k,R=O;return j(),q(G,null,[m("div",K,[l(D,{title:"Procédure de succession de biens mobiliers",goBackTo:"/addProcedure"})]),m("div",Q,[l(g,null,{default:t(()=>[l(r,{cols:"12",lg:"5"},{default:t(()=>[l(g,null,{default:t(()=>[l(r,{cols:"12"},{default:t(()=>[l(T,{elevation:4,rounded:"",height:"100%",class:"pa-2"},{default:t(()=>[e[12]||(e[12]=m("h4",{class:"mb-3"},"Sélection du client",-1)),m("div",W,[l($,null,{default:t(()=>[l(h,{modelValue:s(v),"onUpdate:modelValue":e[0]||(e[0]=o=>u(v)?v.value=o:null),color:"primary",label:"Selectionner un client",items:s(C),"item-title":"NAME","item-value":"ID",variant:"outlined","hide-details":"",density:"compact"},null,8,["modelValue","items"])]),_:1}),l(J,{class:"my-5"},{default:t(()=>e[10]||(e[10]=[x("ou")])),_:1}),l(S,{color:"primary",class:"text-none align-self-center","prepend-icon":"mdi-account-tie",onClick:B},{default:t(()=>e[11]||(e[11]=[x("Créer un client")])),_:1}),l(p,{open:s(c),"onUpdate:open":e[1]||(e[1]=o=>c.value=o)},null,8,["open"])])]),_:1})]),_:1}),l(r,{cols:"12"},{default:t(()=>[l(T,{elevation:4,rounded:"",height:"100%",class:"pa-2"},{default:t(()=>[e[13]||(e[13]=m("h4",{class:"mb-3"},"Aperçu informations du client",-1)),l($,null,{default:t(()=>[l(g,null,{default:t(()=>[l(r,{cols:"12",sm:"5"},{default:t(()=>[l(f,{modelValue:s(N),"onUpdate:modelValue":e[2]||(e[2]=o=>u(N)?N.value=o:null),color:"primary",label:"Nom",variant:"outlined","hide-details":"",disabled:"",density:"compact"},null,8,["modelValue"])]),_:1}),l(r,{cols:"12",sm:"7"},{default:t(()=>[l(f,{modelValue:s(b),"onUpdate:modelValue":e[3]||(e[3]=o=>u(b)?b.value=o:null),color:"primary",label:"Prénoms",variant:"outlined","hide-details":"",disabled:"",density:"compact"},null,8,["modelValue"])]),_:1}),l(r,{cols:"12",sm:"5"},{default:t(()=>[l(f,{modelValue:s(y),"onUpdate:modelValue":e[4]||(e[4]=o=>u(y)?y.value=o:null),color:"primary",label:"CNI",variant:"outlined","hide-details":"",disabled:"",density:"compact"},null,8,["modelValue"])]),_:1}),l(r,{cols:"12",sm:"4"},{default:t(()=>[l(f,{modelValue:s(_),"onUpdate:modelValue":e[5]||(e[5]=o=>u(_)?_.value=o:null),color:"primary",label:"Date de naissance",variant:"outlined","hide-details":"",disabled:"",density:"compact"},null,8,["modelValue"])]),_:1}),l(r,{cols:"12",sm:"3"},{default:t(()=>[l(f,{modelValue:s(V),"onUpdate:modelValue":e[6]||(e[6]=o=>u(V)?V.value=o:null),color:"primary",label:"Sexe",variant:"outlined","hide-details":"",disabled:"",density:"compact"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(r,{cols:"12",lg:"7"},{default:t(()=>[l(T,{elevation:4,rounded:"",height:"100%",class:"pa-4"},{default:t(()=>[e[14]||(e[14]=m("h4",{class:"mb-3"},"Documents requis pour initier la procédure",-1)),l(g,null,{default:t(()=>[l(r,{cols:"12"},{default:t(()=>[l(i,{label:"CNI du client",file:s(E),"onUpdate:file":e[7]||(e[7]=o=>u(E)?E.value=o:null)},null,8,["file"])]),_:1}),l(r,{cols:"12"},{default:t(()=>[l(i,{label:"Extrait d'acte de naissance",file:s(I),"onUpdate:file":e[8]||(e[8]=o=>u(I)?I.value=o:null)},null,8,["file"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),m("div",X,[l(S,{color:"primary",class:"text-none","prepend-icon":"mdi-content-save-outline",onClick:F},{default:t(()=>e[15]||(e[15]=[x(" Enregistrer la procédure ")])),_:1}),l(R,{text:"Voulez vous enregistrer la procédure de succession de biens mobiliers ?",open:s(U),"onUpdate:open":e[9]||(e[9]=o=>U.value=o)},null,8,["open"])])],64)}}};export{pe as default};
