import{_ as S}from"./ClAYQHhI.js";import{_ as h}from"./jk-e8p3X.js";import{_ as N}from"./EBw08yYa.js";import{_ as F,r as c,u as v,D as y,v as A,x as e,z as n,L as r,M as T,a1 as C,A as d,N as D,J as k,t as M,B as x,y as a,q as R}from"./DXnXjm7K.js";import{V}from"./Bip00q1m.js";import{V as b}from"./CSLxKgvM.js";import"./B22xuEom.js";import"./B8Rr4oru.js";import"./BS0uIqYZ.js";import"./Ctz4MgHs.js";import"./aLweXgft.js";import"./CHercgjs.js";const O={class:"ma-4"},G={class:"ma-4"},H={class:"d-flex justify-end align-center ga-5"},P={class:"searchField"},B={class:"mt-4"},U=["onClick"],$={class:"no-data-container"},w={__name:"index",setup(j){const _=c([{align:"start",key:"LAST_NAME",title:"Nom"},{align:"start",key:"FIRST_NAME",title:"Prénoms"},{align:"start",key:"EMAIL",title:"Email"},{align:"start",key:"PHONE",title:"Téléphone"},{align:"start",key:"CURRENT_FILES",title:"Dossiers en cours"},{align:"start",key:"COMPLETED_FILES",title:"Dossiers terminés"},{align:"start",key:"HANGING_FILES",title:"Dossiers suspendus"},{align:"start",key:"CLOSED_FILES",title:"Dossiers arrêtés"},{align:"start",key:"FILES",title:"Dossiers"}]),u=c([]),i=c(null),l=c(!1),p=()=>{l.value=!l.value},E=v(),f=o=>{E.push(`/customersManagement/${o.ID}`)},I=R(),m=async()=>{try{const o=await $fetch(`${I.public.baseUrl}/customers`);o&&(u.value=o.map(t=>({ID:t.id,LAST_NAME:t.lastName,FIRST_NAME:t.firstName,EMAIL:t.email,PHONE:t.phone,CURRENT_FILES:0,COMPLETED_FILES:0,HANGING_FILES:0,CLOSED_FILES:0,FILES:t.folders.length})))}catch(o){console.error("Erreur lors du chargement des clients :",o)}};return m(),y(()=>{l.value||m()}),(o,t)=>{const L=S,g=h;return M(),A(k,null,[e("div",O,[n(L,{title:"Gestion des clients",goBackTo:"/home"})]),e("div",G,[e("div",H,[e("div",P,[n(C,{color:"primary",modelValue:r(i),"onUpdate:modelValue":t[0]||(t[0]=s=>T(i)?i.value=s:null),label:"Rechercher","prepend-inner-icon":"mdi-magnify",variant:"outlined",density:"compact","hide-details":"",clearable:""},null,8,["modelValue"])]),e("div",null,[n(D,{color:"primary",prependIcon:"mdi-account-tie",class:"text-none",onClick:p},{default:d(()=>t[2]||(t[2]=[x(" Ajouter un client")])),_:1})]),n(g,{open:r(l),"onUpdate:open":t[1]||(t[1]=s=>l.value=s)},null,8,["open"])]),e("div",B,[n(V,{headers:r(_),items:r(u),search:r(i),"items-per-page-text":"Clients par page :","item-value":"ID",class:"customTable1",density:"compact","fixed-header":"",hover:""},{item:d(({item:s})=>[e("tr",{onClick:q=>f(s)},[e("td",null,a(s.LAST_NAME),1),e("td",null,a(s.FIRST_NAME),1),e("td",null,a(s.EMAIL),1),e("td",null,a(s.PHONE),1),e("td",null,a(s.CURRENT_FILES),1),e("td",null,a(s.COMPLETED_FILES),1),e("td",null,a(s.HANGING_FILES),1),e("td",null,a(s.CLOSED_FILES),1),e("td",null,a(s.FILES),1)],8,U)]),"no-data":d(()=>[e("div",$,[n(b,{src:N,height:"80",width:"80",class:"mb-3",alt:"Aucune donnée"}),t[3]||(t[3]=e("p",null,"Aucun client trouvé.",-1))])]),_:1},8,["headers","items","search"])])])],64)}}},oe=F(w,[["__scopeId","data-v-50b2f7a4"]]);export{oe as default};
