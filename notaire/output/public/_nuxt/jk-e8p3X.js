import{r as i,g as k,t as z,a0 as A,A as t,z as e,a1 as u,L as n,M as r,a2 as B,N}from"./DXnXjm7K.js";import{V as M,b as P,c as E}from"./B22xuEom.js";import{V as w,a as d}from"./B8Rr4oru.js";import{V as _,a as R}from"./BS0uIqYZ.js";import{V as $}from"./aLweXgft.js";import{V as Y}from"./CHercgjs.js";const K={__name:"createCustomerModal",props:{open:{type:Boolean,default:!1}},emits:["update:open"],setup(F,{emit:I}){const x=F,s=i(""),m=i(""),p=i(null),c=i(null),V=i(""),f=i(""),v=i(null),y=i(""),g=i(null),S=o=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o)||"Veuillez entrer une adresse email valide.",O=I,b=new Date,C=new Date(b.getFullYear()-18,b.getMonth(),b.getDate()).toISOString().split("T")[0],T=async()=>{const o=new FormData;o.append("lastName",s.value),o.append("firstName",m.value),o.append("gender",p.value),o.append("birthDate",c.value),o.append("email",V.value),o.append("phone",f.value),o.append("identification",v.value),o.append("identificationNumber",y.value),o.append("imageOfIdentification",g.value),console.log(o.get("imageOfIdentification"));try{const U=await $fetch("http://serverizynotary.izydr.net/customers",{method:"POST",body:o});alert("Client créé avec succès."),D()}catch(l){console.error("Erreur lors de la création du client :",l)}},D=()=>{O("update:open",!1)};return(o,l)=>{const U=k("v-date-input");return z(),A(Y,{modelValue:x.open,"onUpdate:modelValue":l[9]||(l[9]=a=>x.open=a),"max-width":"600"},{default:t(()=>[e(M,{"prepend-icon":"mdi-account-tie",title:"Créer un client"},{default:t(()=>[e(P,null,{default:t(()=>[e(w,{dense:""},{default:t(()=>[e(d,{cols:"6"},{default:t(()=>[e(u,{modelValue:n(s),"onUpdate:modelValue":l[0]||(l[0]=a=>r(s)?s.value=a:null),color:"primary",label:"Nom",variant:"outlined",density:"compact"},null,8,["modelValue"])]),_:1}),e(d,{cols:"6"},{default:t(()=>[e(u,{modelValue:n(m),"onUpdate:modelValue":l[1]||(l[1]=a=>r(m)?m.value=a:null),color:"primary",label:"Prénoms",variant:"outlined",density:"compact"},null,8,["modelValue"])]),_:1}),e(d,{cols:"6"},{default:t(()=>[e(_,{modelValue:n(p),"onUpdate:modelValue":l[2]||(l[2]=a=>r(p)?p.value=a:null),color:"primary",label:"Sexe",items:["Homme","Femme"],variant:"outlined",density:"compact"},null,8,["modelValue"])]),_:1}),e(d,{cols:"6"},{default:t(()=>[e(U,{modelValue:n(c),"onUpdate:modelValue":l[3]||(l[3]=a=>r(c)?c.value=a:null),color:"primary","prepend-icon":"",label:"Date de naissance",variant:"outlined",density:"compact",max:n(C),year:new Date(n(C)).getFullYear()},null,8,["modelValue","max","year"])]),_:1}),e(d,{cols:"6"},{default:t(()=>[e(u,{modelValue:n(V),"onUpdate:modelValue":l[4]||(l[4]=a=>r(V)?V.value=a:null),color:"primary",label:"Email",variant:"outlined",density:"compact",rules:[S]},null,8,["modelValue","rules"])]),_:1}),e(d,{cols:"6"},{default:t(()=>[e(u,{modelValue:n(f),"onUpdate:modelValue":l[5]||(l[5]=a=>r(f)?f.value=a:null),color:"primary",label:"Téléphone",variant:"outlined",density:"compact"},null,8,["modelValue"])]),_:1}),e(d,{cols:"6"},{default:t(()=>[e(_,{modelValue:n(v),"onUpdate:modelValue":l[6]||(l[6]=a=>r(v)?v.value=a:null),color:"primary",label:"Pièce d'identité",density:"compact",items:["CNI","Passeport"],variant:"outlined"},null,8,["modelValue"])]),_:1}),e(d,{cols:"6"},{default:t(()=>[e(w,null,{default:t(()=>[e(d,{cols:"12"},{default:t(()=>[e(u,{modelValue:n(y),"onUpdate:modelValue":l[7]||(l[7]=a=>r(y)?y.value=a:null),color:"primary",density:"compact",label:"Numéro de la pièce d'identité",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(d,{cols:"12"},{default:t(()=>[e($,{modelValue:n(g),"onUpdate:modelValue":l[8]||(l[8]=a=>r(g)?g.value=a:null),color:"primary",density:"compact",label:"Ajout d'une image de la pièce d'identité","prepend-icon":"","prepend-inner-icon":"mdi-id-card",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(R),e(E,null,{default:t(()=>[e(B),e(N,{text:"Annuler",variant:"plain",onClick:D,class:"text-none"}),e(N,{color:"primary",text:"Enregistrer",variant:"tonal",onClick:T,class:"text-none"})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}};export{K as _};
