import{_ as tl}from"./ClAYQHhI.js";import{_ as al}from"./jk-e8p3X.js";import{r as o,g as ol,t as K,a0 as nl,A as t,z as l,a1 as m,L as n,M as d,a2 as ul,N as k,D as dl,F as il,v as sl,x as f,J as rl,a4 as w,B as R}from"./DXnXjm7K.js";import{V as ml,b as pl,c as fl}from"./B22xuEom.js";import{V as I,a as u}from"./B8Rr4oru.js";import{V as j,a as H}from"./BS0uIqYZ.js";import{V as cl}from"./aLweXgft.js";import{V as vl}from"./CHercgjs.js";import{V as J,_ as Vl}from"./DAOtDWvy.js";import{_ as yl}from"./D1tss4Vx.js";import{V as G}from"./BWQEG_-l.js";import"./CSLxKgvM.js";import"./Ctz4MgHs.js";const bl={__name:"createSellerModal",props:{open:{type:Boolean,default:!1}},emits:["update:open"],setup(q,{emit:D}){const x=q,c=o(""),g=o(""),v=o(null),p=o(null),S=o(""),C=o(""),V=o(""),y=o(null),b=o(""),N=o(null),A=r=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r)||"Veuillez entrer une adresse email valide.",B=D,_=new Date,M=new Date(_.getFullYear()-18,_.getMonth(),_.getDate()).toISOString().split("T")[0],O=async()=>{const r=new FormData;r.append("lastName",c.value),r.append("firstName",g.value),r.append("gender",v.value),r.append("birthDate",p.value),r.append("email",S.value),r.append("phone",C.value),r.append("maritalStatus",V.value),r.append("identification",y.value),r.append("identificationNumber",b.value),r.append("imageOfIdentification",N.value),console.log(r.get("imageOfIdentification"));try{const F=await $fetch("http://serverizynotary.izydr.net/sellers",{method:"POST",body:r});alert("Client créé avec succès."),T()}catch(i){console.error("Erreur lors de la création du client :",i)}},T=()=>{B("update:open",!1)};return(r,i)=>{const F=ol("v-date-input");return K(),nl(vl,{modelValue:x.open,"onUpdate:modelValue":i[10]||(i[10]=s=>x.open=s),"max-width":"600"},{default:t(()=>[l(ml,{"prepend-icon":"mdi-account-tie-voice",title:"Créer un vendeur"},{default:t(()=>[l(pl,null,{default:t(()=>[l(I,{dense:""},{default:t(()=>[l(u,{cols:"6"},{default:t(()=>[l(m,{modelValue:n(c),"onUpdate:modelValue":i[0]||(i[0]=s=>d(c)?c.value=s:null),color:"primary",label:"Nom",variant:"outlined",density:"compact"},null,8,["modelValue"])]),_:1}),l(u,{cols:"6"},{default:t(()=>[l(m,{modelValue:n(g),"onUpdate:modelValue":i[1]||(i[1]=s=>d(g)?g.value=s:null),color:"primary",label:"Prénoms",variant:"outlined",density:"compact"},null,8,["modelValue"])]),_:1}),l(u,{cols:"6"},{default:t(()=>[l(j,{modelValue:n(v),"onUpdate:modelValue":i[2]||(i[2]=s=>d(v)?v.value=s:null),color:"primary",label:"Sexe",items:["Homme","Femme"],variant:"outlined",density:"compact"},null,8,["modelValue"])]),_:1}),l(u,{cols:"6"},{default:t(()=>[l(F,{modelValue:n(p),"onUpdate:modelValue":i[3]||(i[3]=s=>d(p)?p.value=s:null),color:"primary","prepend-icon":"",density:"compact",label:"Date de naissance",variant:"outlined",max:n(M),year:new Date(n(M)).getFullYear()},null,8,["modelValue","max","year"])]),_:1}),l(u,{cols:"6"},{default:t(()=>[l(j,{modelValue:n(V),"onUpdate:modelValue":i[4]||(i[4]=s=>d(V)?V.value=s:null),color:"primary",label:"Situation matrimoniale",items:["Marié","Célibataire","Divorcé","Veuf"],variant:"outlined",density:"compact"},null,8,["modelValue"])]),_:1}),l(u,{cols:"6"},{default:t(()=>[l(m,{modelValue:n(S),"onUpdate:modelValue":i[5]||(i[5]=s=>d(S)?S.value=s:null),color:"primary",label:"Email",density:"compact",variant:"outlined",rules:[A]},null,8,["modelValue","rules"])]),_:1}),l(u,{cols:"6"},{default:t(()=>[l(m,{modelValue:n(C),"onUpdate:modelValue":i[6]||(i[6]=s=>d(C)?C.value=s:null),color:"primary",label:"Téléphone",density:"compact",variant:"outlined"},null,8,["modelValue"])]),_:1}),l(u,{cols:"6"},{default:t(()=>[l(j,{modelValue:n(y),"onUpdate:modelValue":i[7]||(i[7]=s=>d(y)?y.value=s:null),color:"primary",label:"Pièce d'identité",density:"compact",items:["CNI","Passeport"],variant:"outlined"},null,8,["modelValue"])]),_:1}),l(u,{cols:"6"},{default:t(()=>[l(I,null,{default:t(()=>[l(u,{cols:"12"},{default:t(()=>[l(m,{modelValue:n(b),"onUpdate:modelValue":i[8]||(i[8]=s=>d(b)?b.value=s:null),color:"primary",density:"compact",label:"Numéro de la pièce d'identité",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(u,{cols:"12"},{default:t(()=>[l(cl,{modelValue:n(N),"onUpdate:modelValue":i[9]||(i[9]=s=>d(N)?N.value=s:null),color:"primary",density:"compact",label:"Ajout d'une image de la pièce d'identité","prepend-icon":"","prepend-inner-icon":"mdi-id-card",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(H),l(fl,null,{default:t(()=>[l(ul),l(k,{text:"Annuler",variant:"plain",onClick:T,class:"text-none"}),l(k,{color:"primary",text:"Enregistrer",variant:"tonal",onClick:O,class:"text-none"})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},Nl={class:"ma-4"},gl={class:"ma-2"},Cl={class:"d-flex flex-column justify-center"},Ul={class:"d-flex flex-column justify-center"},Il={class:"ma-4 d-flex justify-end"},Dl="http://serverizynotary.izydr.net",$l={__name:"selling",setup(q){const D=o(!1),x=o(!1),c=o(!1),g=o([]),v=o(null),p=o(null),S=o([]),C=o(null);o(null);const V=o(""),y=o(""),b=o(""),N=o(""),A=o(""),B=o(""),_=o(""),M=o(""),O=o(""),T=o(""),r=o(null),i=o(null),F=o(null),s=o(null),$=o(null),P=o(null),z=o(null),L=o(null),Q=()=>{c.value=!c.value},W=()=>{D.value=!D.value},X=()=>{x.value=!x.value},Y=async()=>{try{const E=await $fetch(`${Dl}/customers`);E&&(g.value=E.map(e=>({ID:e.id,LASTNAME:e.lastName,FIRSTNAME:e.firstName,NAME:e.lastName+" "+e.firstName,IDENTIFICATION_NUMBER:e.identificationNumber,BIRTHDATE:e.birthDate,GENDER:e.gender})))}catch(E){console.error("Erreur lors du chargement des clients :",E)}};return Y(),dl(()=>{D.value||Y()}),il(v,E=>{p.value=g.value.find(e=>e.ID===E.ID),p.value&&(y.value=p.value.LASTNAME,V.value=p.value.FIRSTNAME,b.value=new Date(p.value.BIRTHDATE).toLocaleDateString(),N.value=p.value.GENDER,A.value=p.value.IDENTIFICATION_NUMBER)}),(E,e)=>{const Z=tl,h=al,ll=bl,U=Vl,el=yl;return K(),sl(rl,null,[f("div",Nl,[l(Z,{title:"Procédure de vente",goBackTo:"/addProcedure"})]),f("div",gl,[l(I,null,{default:t(()=>[l(u,{cols:"12",lg:"5"},{default:t(()=>[l(I,null,{default:t(()=>[l(u,{cols:"12"},{default:t(()=>[l(w,{elevation:4,rounded:"",height:"100%",class:"pa-2"},{default:t(()=>[e[25]||(e[25]=f("h4",{class:"mb-3"},"Sélection du client",-1)),f("div",Cl,[l(G,null,{default:t(()=>[l(J,{modelValue:n(v),"onUpdate:modelValue":e[0]||(e[0]=a=>d(v)?v.value=a:null),color:"primary",label:"Selectionner un client",items:n(g),"item-title":"NAME","item-value":"ID",variant:"outlined","hide-details":"",density:"compact"},null,8,["modelValue","items"])]),_:1}),l(H,{class:"my-5"},{default:t(()=>e[23]||(e[23]=[R("ou")])),_:1}),l(k,{color:"primary",class:"text-none align-self-center","prepend-icon":"mdi-account-tie",onClick:W},{default:t(()=>e[24]||(e[24]=[R("Créer un client")])),_:1}),l(h,{open:n(D),"onUpdate:open":e[1]||(e[1]=a=>D.value=a)},null,8,["open"])])]),_:1})]),_:1}),l(u,{cols:"12"},{default:t(()=>[l(w,{elevation:4,rounded:"",height:"100%",class:"pa-2"},{default:t(()=>[e[26]||(e[26]=f("h4",{class:"mb-3"},"Aperçu des informations du client",-1)),l(G,null,{default:t(()=>[l(I,null,{default:t(()=>[l(u,{cols:"12",sm:"5"},{default:t(()=>[l(m,{modelValue:n(y),"onUpdate:modelValue":e[2]||(e[2]=a=>d(y)?y.value=a:null),color:"primary",label:"Nom",variant:"outlined","hide-details":"",disabled:"",density:"compact"},null,8,["modelValue"])]),_:1}),l(u,{cols:"12",sm:"7"},{default:t(()=>[l(m,{modelValue:n(V),"onUpdate:modelValue":e[3]||(e[3]=a=>d(V)?V.value=a:null),color:"primary",label:"Prénoms",variant:"outlined","hide-details":"",disabled:"",density:"compact"},null,8,["modelValue"])]),_:1}),l(u,{cols:"12",sm:"5"},{default:t(()=>[l(m,{modelValue:n(A),"onUpdate:modelValue":e[4]||(e[4]=a=>d(A)?A.value=a:null),color:"primary",label:"CNI",variant:"outlined","hide-details":"",disabled:"",density:"compact"},null,8,["modelValue"])]),_:1}),l(u,{cols:"12",sm:"4"},{default:t(()=>[l(m,{modelValue:n(b),"onUpdate:modelValue":e[5]||(e[5]=a=>d(b)?b.value=a:null),color:"primary",label:"Date de naissance",variant:"outlined","hide-details":"",disabled:"",density:"compact"},null,8,["modelValue"])]),_:1}),l(u,{cols:"12",sm:"3"},{default:t(()=>[l(m,{modelValue:n(N),"onUpdate:modelValue":e[6]||(e[6]=a=>d(N)?N.value=a:null),color:"primary",label:"Sexe",variant:"outlined","hide-details":"",disabled:"",density:"compact"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(I,null,{default:t(()=>[l(u,{cols:"12"},{default:t(()=>[l(w,{elevation:4,rounded:"",height:"100%",class:"pa-2"},{default:t(()=>[e[29]||(e[29]=f("h4",{class:"mb-3"},"Sélection du vendeur",-1)),f("div",Ul,[l(G,null,{default:t(()=>[l(J,{modelValue:n(C),"onUpdate:modelValue":e[7]||(e[7]=a=>d(C)?C.value=a:null),color:"primary",label:"Selectionner un vendeur",items:n(S),"item-title":"NAME","item-value":"ID",variant:"outlined","hide-details":"",density:"compact"},null,8,["modelValue","items"])]),_:1}),l(H,{class:"my-5"},{default:t(()=>e[27]||(e[27]=[R("ou")])),_:1}),l(k,{color:"blue",class:"text-none align-self-center","prepend-icon":"mdi-account-tie-voice",onClick:X},{default:t(()=>e[28]||(e[28]=[R("Créer un vendeur")])),_:1}),l(ll,{open:n(x),"onUpdate:open":e[8]||(e[8]=a=>x.value=a)},null,8,["open"])])]),_:1})]),_:1}),l(u,{cols:"12"},{default:t(()=>[l(w,{elevation:4,rounded:"",height:"100%",class:"pa-4"},{default:t(()=>[e[30]||(e[30]=f("h4",{class:"mb-3"},"Aperçu des informations du vendeur",-1)),l(I,null,{default:t(()=>[l(u,{cols:"12",sm:"5"},{default:t(()=>[l(m,{modelValue:n(B),"onUpdate:modelValue":e[9]||(e[9]=a=>d(B)?B.value=a:null),color:"primary",label:"Nom",variant:"outlined","hide-details":"",disabled:"",density:"compact"},null,8,["modelValue"])]),_:1}),l(u,{cols:"12",sm:"7"},{default:t(()=>[l(m,{modelValue:n(_),"onUpdate:modelValue":e[10]||(e[10]=a=>d(_)?_.value=a:null),color:"primary",label:"Prénoms",variant:"outlined","hide-details":"",disabled:"",density:"compact"},null,8,["modelValue"])]),_:1}),l(u,{cols:"12",sm:"5"},{default:t(()=>[l(m,{modelValue:n(T),"onUpdate:modelValue":e[11]||(e[11]=a=>d(T)?T.value=a:null),color:"primary",label:"Numéro de la CNI",variant:"outlined","hide-details":"",disabled:"",density:"compact"},null,8,["modelValue"])]),_:1}),l(u,{cols:"12",sm:"3"},{default:t(()=>[l(m,{modelValue:n(M),"onUpdate:modelValue":e[12]||(e[12]=a=>d(M)?M.value=a:null),color:"primary",label:"Sexe",variant:"outlined","hide-details":"",disabled:"",density:"compact"},null,8,["modelValue"])]),_:1}),l(u,{cols:"12",sm:"4"},{default:t(()=>[l(m,{modelValue:n(O),"onUpdate:modelValue":e[13]||(e[13]=a=>d(O)?O.value=a:null),color:"primary",label:"Situation matrimoniale",variant:"outlined","hide-details":"",disabled:"",density:"compact"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(u,{cols:"12",lg:"7"},{default:t(()=>[l(w,{elevation:4,rounded:"",height:"100%",class:"pa-4"},{default:t(()=>[e[31]||(e[31]=f("h4",{class:"mb-3"},"Documents requis pour initier la procédure",-1)),l(I,null,{default:t(()=>[l(u,{cols:"12"},{default:t(()=>[l(U,{label:"CNI du vendeur",file:n(r),"onUpdate:file":e[14]||(e[14]=a=>d(r)?r.value=a:null)},null,8,["file"])]),_:1}),l(u,{cols:"12"},{default:t(()=>[l(U,{label:"CNI du conjoint",file:n(i),"onUpdate:file":e[15]||(e[15]=a=>d(i)?i.value=a:null)},null,8,["file"])]),_:1}),l(u,{cols:"12"},{default:t(()=>[l(U,{label:"Extrait d'acte de naissance ou de mariage",file:n(F),"onUpdate:file":e[16]||(e[16]=a=>d(F)?F.value=a:null)},null,8,["file"])]),_:1}),l(u,{cols:"12"},{default:t(()=>[l(U,{label:"Facture de CIE ou SODECI",file:n(s),"onUpdate:file":e[17]||(e[17]=a=>d(s)?s.value=a:null)},null,8,["file"])]),_:1}),l(u,{cols:"12"},{default:t(()=>[l(U,{label:"Attestation de situation fiscale",file:n($),"onUpdate:file":e[18]||(e[18]=a=>d($)?$.value=a:null)},null,8,["file"])]),_:1}),l(u,{cols:"12"},{default:t(()=>[l(U,{label:"Titre de propriété (copie du titre foncier, ACD ...)",file:n(P),"onUpdate:file":e[19]||(e[19]=a=>d(P)?P.value=a:null)},null,8,["file"])]),_:1}),l(u,{cols:"12"},{default:t(()=>[l(U,{label:"État foncier",file:n(z),"onUpdate:file":e[20]||(e[20]=a=>d(z)?z.value=a:null)},null,8,["file"])]),_:1}),l(u,{cols:"12"},{default:t(()=>[l(U,{label:"Certificat de localisation",file:n(L),"onUpdate:file":e[21]||(e[21]=a=>d(L)?L.value=a:null)},null,8,["file"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),f("div",Il,[l(k,{color:"primary",class:"text-none","prepend-icon":"mdi-content-save-outline",onClick:Q},{default:t(()=>e[32]||(e[32]=[R(" Enregistrer la procédure ")])),_:1}),l(el,{text:"Voulez-vous enregistrer cette procédure de vente ?",open:n(c),"onUpdate:open":e[22]||(e[22]=a=>c.value=a)},null,8,["open"])])],64)}}};export{$l as default};
