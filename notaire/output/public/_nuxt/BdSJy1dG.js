import{r as g,U as O,F as L,X as P,ay as B,az as F,aA as $,aB as q,_ as H,u as J,v as X,x as k,z as f,A as y,L as p,M as T,J as Z,t as W,B as x,aC as Y,a1 as R,N as D,y as N,a3 as G}from"./DXnXjm7K.js";import{_ as K}from"./DfZKb_P1.js";import{i as Q}from"./CW7irCmf.js";import{V as _,a as z,b as ee,c as te}from"./B22xuEom.js";import{V as oe}from"./CHercgjs.js";import{V as ne}from"./BWQEG_-l.js";import"./CSLxKgvM.js";function re(e,n){if(typeof e!="string")throw new TypeError("argument str must be a string");const t={},o=n||{},a=o.decode||ie;let s=0;for(;s<e.length;){const i=e.indexOf("=",s);if(i===-1)break;let l=e.indexOf(";",s);if(l===-1)l=e.length;else if(l<i){s=e.lastIndexOf(";",i-1)+1;continue}const d=e.slice(s,i).trim();if(o!=null&&o.filter&&!(o!=null&&o.filter(d))){s=l+1;continue}if(t[d]===void 0){let u=e.slice(i+1,l).trim();u.codePointAt(0)===34&&(u=u.slice(1,-1)),t[d]=ae(u,a)}s=l+1}return t}function ie(e){return e.includes("%")?decodeURIComponent(e):e}function ae(e,n){try{return n(e)}catch{return e}}const E=/^[\u0009\u0020-\u007E\u0080-\u00FF]+$/;function I(e,n,t){const o=t||{},a=o.encode||encodeURIComponent;if(typeof a!="function")throw new TypeError("option encode is invalid");if(!E.test(e))throw new TypeError("argument name is invalid");const s=a(n);if(s&&!E.test(s))throw new TypeError("argument val is invalid");let i=e+"="+s;if(o.maxAge!==void 0&&o.maxAge!==null){const l=o.maxAge-0;if(Number.isNaN(l)||!Number.isFinite(l))throw new TypeError("option maxAge is invalid");i+="; Max-Age="+Math.floor(l)}if(o.domain){if(!E.test(o.domain))throw new TypeError("option domain is invalid");i+="; Domain="+o.domain}if(o.path){if(!E.test(o.path))throw new TypeError("option path is invalid");i+="; Path="+o.path}if(o.expires){if(!se(o.expires)||Number.isNaN(o.expires.valueOf()))throw new TypeError("option expires is invalid");i+="; Expires="+o.expires.toUTCString()}if(o.httpOnly&&(i+="; HttpOnly"),o.secure&&(i+="; Secure"),o.priority)switch(typeof o.priority=="string"?o.priority.toLowerCase():o.priority){case"low":{i+="; Priority=Low";break}case"medium":{i+="; Priority=Medium";break}case"high":{i+="; Priority=High";break}default:throw new TypeError("option priority is invalid")}if(o.sameSite)switch(typeof o.sameSite=="string"?o.sameSite.toLowerCase():o.sameSite){case!0:{i+="; SameSite=Strict";break}case"lax":{i+="; SameSite=Lax";break}case"strict":{i+="; SameSite=Strict";break}case"none":{i+="; SameSite=None";break}default:throw new TypeError("option sameSite is invalid")}return o.partitioned&&(i+="; Partitioned"),i}function se(e){return Object.prototype.toString.call(e)==="[object Date]"||e instanceof Date}function w(e){if(typeof e!="object")return e;var n,t,o=Object.prototype.toString.call(e);if(o==="[object Object]"){if(e.constructor!==Object&&typeof e.constructor=="function"){t=new e.constructor;for(n in e)e.hasOwnProperty(n)&&t[n]!==e[n]&&(t[n]=w(e[n]))}else{t={};for(n in e)n==="__proto__"?Object.defineProperty(t,n,{value:w(e[n]),configurable:!0,enumerable:!0,writable:!0}):t[n]=w(e[n])}return t}if(o==="[object Array]"){for(n=e.length,t=Array(n);n--;)t[n]=w(e[n]);return t}return o==="[object Set]"?(t=new Set,e.forEach(function(a){t.add(w(a))}),t):o==="[object Map]"?(t=new Map,e.forEach(function(a,s){t.set(w(s),w(a))}),t):o==="[object Date]"?new Date(+e):o==="[object RegExp]"?(t=new RegExp(e.source,e.flags),t.lastIndex=e.lastIndex,t):o==="[object DataView]"?new e.constructor(w(e.buffer)):o==="[object ArrayBuffer]"?e.slice(0):o.slice(-6)==="Array]"?new e.constructor(e):e}const le={path:"/",watch:!0,decode:e=>F(decodeURIComponent(e)),encode:e=>encodeURIComponent(typeof e=="string"?e:JSON.stringify(e))},C=window.cookieStore;function j(e,n){var d;const t={...le,...n};t.filter??(t.filter=u=>u===e);const o=M(t)||{};let a;t.maxAge!==void 0?a=t.maxAge*1e3:t.expires&&(a=t.expires.getTime()-Date.now());const s=a!==void 0&&a<=0,i=w(s?void 0:o[e]??((d=t.default)==null?void 0:d.call(t))),l=a&&!s?de(i,a,t.watch&&t.watch!=="shallow"):g(i);{let u=null;try{!C&&typeof BroadcastChannel<"u"&&(u=new BroadcastChannel(`nuxt:cookies:${e}`))}catch{}const v=()=>{t.readonly||Q(l.value,o[e])||(ce(e,l.value,t),o[e]=w(l.value),u==null||u.postMessage({value:t.encode(l.value)}))},b=h=>{var r;const c=h.refresh?(r=M(t))==null?void 0:r[e]:t.decode(h.value);S=!0,l.value=c,o[e]=w(c),$(()=>{S=!1})};let S=!1;const V=!!P();if(V&&O(()=>{S=!0,v(),u==null||u.close()}),C){const h=c=>{const r=c.changed.find(A=>A.name===e),m=c.deleted.find(A=>A.name===e);r&&b({value:r.value}),m&&b({value:null})};C.addEventListener("change",h),V&&O(()=>C.removeEventListener("change",h))}else u&&(u.onmessage=({data:h})=>b(h));t.watch?L(l,()=>{S||v()},{deep:t.watch!=="shallow"}):v()}return l}function M(e={}){return re(document.cookie,e)}function ue(e,n,t={}){return n==null?I(e,n,{...t,maxAge:-1}):I(e,n,t)}function ce(e,n,t={}){document.cookie=ue(e,n,t)}const U=2147483647;function de(e,n,t){let o,a,s=0;const i=t?g(e):{value:e};return P()&&O(()=>{a==null||a(),clearTimeout(o)}),B((l,d)=>{t&&(a=L(i,d));function u(){s=0,clearTimeout(o);const v=n-s,b=v<U?v:U;o=setTimeout(()=>{if(s+=b,s<n)return u();i.value=void 0,d()},b)}return{get(){return l(),i.value},set(v){u(),i.value=v,d()}}})}const fe=q("auth",{state:()=>({token:j("access_token").value||null}),actions:{setToken(e){j("access_token").value=e,this.token=e},clearToken(){j("access_token").value=null,this.token=null}},getters:{isAuthenticated:e=>!!e.token}}),pe={class:"d-flex fill-height"},me={class:"w-100 d-flex flex-column align-center justify-center"},ye={__name:"login",setup(e){const n=g(!1),t=g(""),o=g(""),a=g(!1),s=g(!1),i=g(!1),l=g(""),d=g(""),u=c=>!!c||"Le champ est obligatoire.",v=c=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(c)||"Veuillez entrer une adresse email valide.",b=c=>/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*\W)[A-Za-z\d\W]{8,}$/.test(c)||"Veuillez entrer un mot de passe ayant au moins huit (8) caractères, un chiffre, une lettre minuscule, une lettre majuscule; un caractère spécial.",S=fe(),V=J(),h=async()=>{a.value=!0,i.value=!1;try{const r=await $fetch("http://serverizynotary.izydr.net/auth/login",{method:"POST",body:JSON.stringify({email:t.value,password:o.value})});r!=null&&r.accessToken&&(console.log(r.accessToken),S.setToken(r.accessToken),V.push("/home"))}catch(c){console.error("Erreur de connexion :",c),l.value="Erreur de connexion",d.value="Veuillez vérifier vos informations."}finally{a.value=!1,i.value=!0}};return(c,r)=>(W(),X(Z,null,[k("div",pe,[r[10]||(r[10]=k("div",{class:"w-100 d-none d-sm-none d-md-flex bg-img"},null,-1)),k("div",me,[f(_,{class:"px-6 py-8 w-100 bg-background","max-width":"450",variant:"flat"},{default:y(()=>[r[9]||(r[9]=k("div",{class:"w-100 d-flex justify-center"},[k("img",{class:"w-25",src:K,alt:""})],-1)),f(z,{class:"text-center font-weight-bold text-h5"},{default:y(()=>r[6]||(r[6]=[x(" Connexion ")])),_:1}),f(ne,{modelValue:p(n),"onUpdate:modelValue":r[3]||(r[3]=m=>T(n)?n.value=m:null),onSubmit:Y(h,["prevent"])},{default:y(()=>[f(R,{modelValue:p(t),"onUpdate:modelValue":r[0]||(r[0]=m=>T(t)?t.value=m:null),readonly:p(a),rules:[u,v],color:"primary",label:"Email",placeholder:"Entrer votre email",variant:"outlined",clearable:"",class:"mb-2"},null,8,["modelValue","readonly","rules"]),f(R,{modelValue:p(o),"onUpdate:modelValue":r[1]||(r[1]=m=>T(o)?o.value=m:null),readonly:p(a),"append-inner-icon":p(s)?"mdi-eye":"mdi-eye-off",rules:[u,b],type:p(s)?"text":"password",color:"primary",label:"Mot de passe",placeholder:"Entrer votre mot de passe",variant:"outlined",clearable:"","onClick:appendInner":r[2]||(r[2]=m=>s.value=!p(s))},null,8,["modelValue","readonly","append-inner-icon","rules","type"]),r[8]||(r[8]=k("br",null,null,-1)),f(D,{disabled:!p(n),loading:p(a),color:"primary",size:"large",type:"submit",variant:"elevated",class:"text-none",block:""},{default:y(()=>r[7]||(r[7]=[x(" Se connecter ")])),_:1},8,["disabled","loading"])]),_:1},8,["modelValue"])]),_:1})])]),f(oe,{modelValue:p(i),"onUpdate:modelValue":r[5]||(r[5]=m=>T(i)?i.value=m:null),persistent:"","max-width":"400"},{default:y(()=>[f(_,null,{default:y(()=>[f(z,{class:"headline"},{default:y(()=>[x(N(p(l)),1)]),_:1}),f(ee,{class:"textModal"},{default:y(()=>[f(G,{class:"mb-3",color:"#ad1919",size:80},{default:y(()=>r[11]||(r[11]=[x("mdi-close-circle-outline")])),_:1}),k("p",null,N(p(d)),1)]),_:1}),f(te,null,{default:y(()=>[f(D,{color:"#808080",variant:"elevated",class:"text-none",onClick:r[4]||(r[4]=m=>i.value=!1)},{default:y(()=>r[12]||(r[12]=[x("Fermer")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}},xe=H(ye,[["__scopeId","data-v-852774ea"]]);export{xe as default};
