import{_ as M}from"./ClAYQHhI.js";import{_ as w}from"./jk-e8p3X.js";import{V as k,_ as H}from"./DAOtDWvy.js";import{_ as P}from"./D1tss4Vx.js";import{r as n,D as z,F as L,v as q,x as m,z as l,A as t,N as S,L as s,J as G,t as j,a4 as R,M as d,B as x,a1 as p}from"./DXnXjm7K.js";import{p as J}from"./eMPb1Mbx.js";import{V as T,a as r}from"./B8Rr4oru.js";import{V as O}from"./BWQEG_-l.js";import{a as K}from"./BS0uIqYZ.js";import"./B22xuEom.js";import"./CSLxKgvM.js";import"./aLweXgft.js";import"./CHercgjs.js";import"./Ctz4MgHs.js";const Q={class:"ma-4"},W={class:"ma-2"},X={class:"d-flex flex-column justify-center"},Y={class:"ma-4 d-flex justify-end"},A="http://serverizynotary.izydr.net",pe={__name:"transferOfRealEstate",setup(Z){const c=n(!1),U=n(!1),C=n([]),v=n(null),u=n(null),b=n(""),N=n(""),V=n(""),_=n(""),y=n(""),E=n(null),D=n(null),g=n(null),$=()=>{c.value=!c.value},h=async()=>{try{const a=await $fetch(`${A}/customers`);a&&(C.value=a.map(e=>({ID:e.id,LASTNAME:e.lastName,FIRSTNAME:e.firstName,NAME:e.lastName+" "+e.firstName,IDENTIFICATION_NUMBER:e.identificationNumber,BIRTHDATE:e.birthDate,GENDER:e.gender})))}catch(a){console.error("Erreur lors du chargement des clients :",a)}};h(),z(()=>{c.value||h()}),L(v,a=>{u.value=C.value.find(e=>e.ID===a.ID),u.value&&(N.value=u.value.LASTNAME,b.value=u.value.FIRSTNAME,V.value=new Date(u.value.BIRTHDATE).toLocaleDateString(),_.value=u.value.GENDER,y.value=u.value.IDENTIFICATION_NUMBER)});const B=async()=>{const a=new FormData,I=(await $fetch(`${A}/folders`)).length;if(isNaN(I)){console.error("Erreur : count est NaN");return}a.append("folderNum",J("Succession de biens immobiliers",I)),a.append("procedureType","Succession de biens immobiliers"),a.append("progression",1/7),a.append("status","En cours"),a.append("customerId",u.value.ID);const f={cniOfRightsHolders:E.value,cniOfTheDonor:D.value,birthCertificateOfTheRightsHolders:g.value};for(const i in f)f[i]&&a.append(`${i}`,f[i]);try{const i=await $fetch(`${A}/folders/transferOfRealEstate`,{method:"POST",body:a});alert("Procédure créée avec succès.")}catch(i){console.error("Erreur lors de la création de la procédure :",i)}};return(a,e)=>{const I=M,f=w,i=H,F=P;return j(),q(G,null,[m("div",Q,[l(I,{title:"Procédure de succession de biens immobiliers",goBackTo:"/addProcedure"})]),m("div",W,[l(T,null,{default:t(()=>[l(r,{cols:"12",lg:"5"},{default:t(()=>[l(T,null,{default:t(()=>[l(r,{cols:"12"},{default:t(()=>[l(R,{elevation:4,rounded:"",height:"100%",class:"pa-2"},{default:t(()=>[e[13]||(e[13]=m("h4",{class:"mb-3"},"Sélection du client",-1)),m("div",X,[l(O,null,{default:t(()=>[l(k,{modelValue:s(v),"onUpdate:modelValue":e[0]||(e[0]=o=>d(v)?v.value=o:null),color:"primary",label:"Selectionner un client",items:s(C),"item-title":"NAME","item-value":"ID",variant:"outlined","hide-details":"",density:"compact"},null,8,["modelValue","items"])]),_:1}),l(K,{class:"my-5"},{default:t(()=>e[11]||(e[11]=[x("ou")])),_:1}),l(S,{color:"primary",class:"text-none align-self-center",onClick:$,"prepend-icon":"mdi-account-tie"},{default:t(()=>e[12]||(e[12]=[x("Créer un client")])),_:1}),l(f,{open:s(c),"onUpdate:open":e[1]||(e[1]=o=>c.value=o)},null,8,["open"])])]),_:1})]),_:1}),l(r,{cols:"12"},{default:t(()=>[l(R,{elevation:4,rounded:"",height:"100%",class:"pa-2"},{default:t(()=>[e[14]||(e[14]=m("h4",{class:"mb-3"},"Aperçu informations du client",-1)),l(O,null,{default:t(()=>[l(T,null,{default:t(()=>[l(r,{cols:"12",sm:"5"},{default:t(()=>[l(p,{modelValue:s(N),"onUpdate:modelValue":e[2]||(e[2]=o=>d(N)?N.value=o:null),color:"primary",label:"Nom",variant:"outlined","hide-details":"",disabled:"",density:"compact"},null,8,["modelValue"])]),_:1}),l(r,{cols:"12",sm:"7"},{default:t(()=>[l(p,{modelValue:s(b),"onUpdate:modelValue":e[3]||(e[3]=o=>d(b)?b.value=o:null),color:"primary",label:"Prénoms",variant:"outlined","hide-details":"",disabled:"",density:"compact"},null,8,["modelValue"])]),_:1}),l(r,{cols:"12",sm:"5"},{default:t(()=>[l(p,{modelValue:s(y),"onUpdate:modelValue":e[4]||(e[4]=o=>d(y)?y.value=o:null),color:"primary",label:"CNI",variant:"outlined","hide-details":"",disabled:"",density:"compact"},null,8,["modelValue"])]),_:1}),l(r,{cols:"12",sm:"4"},{default:t(()=>[l(p,{modelValue:s(V),"onUpdate:modelValue":e[5]||(e[5]=o=>d(V)?V.value=o:null),color:"primary",label:"Date de naissance",variant:"outlined","hide-details":"",disabled:"",density:"compact"},null,8,["modelValue"])]),_:1}),l(r,{cols:"12",sm:"3"},{default:t(()=>[l(p,{modelValue:s(_),"onUpdate:modelValue":e[6]||(e[6]=o=>d(_)?_.value=o:null),color:"primary",label:"Sexe",variant:"outlined","hide-details":"",disabled:"",density:"compact"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(r,{cols:"12",lg:"7"},{default:t(()=>[l(R,{elevation:4,rounded:"",height:"100%",class:"pa-4"},{default:t(()=>[e[15]||(e[15]=m("h4",{class:"mb-3"},"Documents requis pour initier la procédure",-1)),l(T,null,{default:t(()=>[l(r,{cols:"12"},{default:t(()=>[l(i,{label:"CNI des ayants droit",file:s(E),"onUpdate:file":e[7]||(e[7]=o=>d(E)?E.value=o:null)},null,8,["file"])]),_:1}),l(r,{cols:"12"},{default:t(()=>[l(i,{label:"CNI du donateur",file:s(D),"onUpdate:file":e[8]||(e[8]=o=>d(D)?D.value=o:null)},null,8,["file"])]),_:1}),l(r,{cols:"12"},{default:t(()=>[l(i,{label:"Extrait d'acte de naissance des ayants droits",file:s(g),"onUpdate:file":e[9]||(e[9]=o=>d(g)?g.value=o:null)},null,8,["file"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),m("div",Y,[l(S,{color:"primary",class:"text-none","prepend-icon":"mdi-content-save-outline",onClick:B},{default:t(()=>e[16]||(e[16]=[x(" Enregistrer la procédure ")])),_:1}),l(F,{text:"Voulez vous enregistrer la procédure de succession de biens immobiliers ?",open:s(U),"onUpdate:open":e[10]||(e[10]=o=>U.value=o)},null,8,["open"])])],64)}}};export{pe as default};
