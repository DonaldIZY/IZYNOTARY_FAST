import{_ as q}from"./ClAYQHhI.js";import{_ as G}from"./jk-e8p3X.js";import{V as O,_ as z}from"./DAOtDWvy.js";import{_ as j}from"./D1tss4Vx.js";import{r as a,D as H,F as h,v as J,x as m,z as l,A as t,N as S,L as s,J as K,t as Q,a4 as A,M as u,B as R,a1 as p}from"./DXnXjm7K.js";import{p as W}from"./eMPb1Mbx.js";import{V as U,a as i}from"./B8Rr4oru.js";import{V as k}from"./BWQEG_-l.js";import{a as X}from"./BS0uIqYZ.js";import"./B22xuEom.js";import"./CSLxKgvM.js";import"./aLweXgft.js";import"./CHercgjs.js";import"./Ctz4MgHs.js";const Y={class:"ma-4"},Z={class:"ma-2"},ee={class:"d-flex flex-column justify-center"},le={class:"ma-4 d-flex justify-end"},B="http://serverizynotary.izydr.net",Ve={__name:"companyFormation",setup(oe){const c=a(!1),$=a(!1),x=a([]),v=a(null),d=a(null),N=a(""),V=a(""),y=a(""),b=a(""),_=a(""),C=a(null),E=a(null),I=a(null),g=a(null),D=a(null),T=a(null),w=()=>{c.value=!c.value},M=async()=>{try{const n=await $fetch(`${B}/customers`);n&&(x.value=n.map(e=>({ID:e.id,LASTNAME:e.lastName,FIRSTNAME:e.firstName,NAME:e.lastName+" "+e.firstName,IDENTIFICATION_NUMBER:e.identificationNumber,BIRTHDATE:e.birthDate,GENDER:e.gender})))}catch(n){console.error("Erreur lors du chargement des clients :",n)}};M(),H(()=>{c.value||M()}),h(v,n=>{d.value=x.value.find(e=>e.ID===n.ID),d.value&&(V.value=d.value.LASTNAME,N.value=d.value.FIRSTNAME,y.value=new Date(d.value.BIRTHDATE).toLocaleDateString(),b.value=d.value.GENDER,_.value=d.value.IDENTIFICATION_NUMBER)});const L=async()=>{const n=new FormData,F=(await $fetch(`${B}/folders`)).length;if(isNaN(F)){console.error("Erreur : count est NaN");return}n.append("folderNum",W("Constitution de société",F)),n.append("procedureType","Constitution de société"),n.append("progression",1/6),n.append("status","En cours"),n.append("customerId",d.value.ID);const f={customerCNI:C.value,criminalRecord:E.value,lease:I.value,sketchOfGeoLocation:g.value,formForCompanyFormation:D.value,capitalToBeReleased:T.value};for(const r in f)f[r]&&n.append(`${r}`,f[r]);try{const r=await $fetch(`${B}/folders/companyFormation`,{method:"POST",body:n});alert("Procédure créée avec succès.")}catch(r){console.error("Erreur lors de la création de la procédure :",r)}};return(n,e)=>{const F=q,f=G,r=z,P=j;return Q(),J(K,null,[m("div",Y,[l(F,{title:"Procédure de constitution de société",goBackTo:"/addProcedure"})]),m("div",Z,[l(U,null,{default:t(()=>[l(i,{cols:"12",lg:"5"},{default:t(()=>[l(U,null,{default:t(()=>[l(i,{cols:"12"},{default:t(()=>[l(A,{elevation:4,rounded:"",height:"100%",class:"pa-2"},{default:t(()=>[e[16]||(e[16]=m("h4",{class:"mb-3"},"Sélection du client",-1)),m("div",ee,[l(k,null,{default:t(()=>[l(O,{modelValue:s(v),"onUpdate:modelValue":e[0]||(e[0]=o=>u(v)?v.value=o:null),color:"primary",label:"Selectionner un client",items:s(x),"item-title":"NAME","item-value":"ID",variant:"outlined","hide-details":"",density:"compact"},null,8,["modelValue","items"])]),_:1}),l(X,{class:"my-5"},{default:t(()=>e[14]||(e[14]=[R("ou")])),_:1}),l(S,{color:"primary",class:"text-none align-self-center","prepend-icon":"mdi-account-tie",onClick:w},{default:t(()=>e[15]||(e[15]=[R("Créer un client")])),_:1}),l(f,{open:s(c),"onUpdate:open":e[1]||(e[1]=o=>c.value=o)},null,8,["open"])])]),_:1})]),_:1}),l(i,{cols:"12"},{default:t(()=>[l(A,{elevation:4,rounded:"",height:"100%",class:"pa-2"},{default:t(()=>[e[17]||(e[17]=m("h4",{class:"mb-3"},"Aperçu des informations du client",-1)),l(k,null,{default:t(()=>[l(U,null,{default:t(()=>[l(i,{cols:"12",sm:"5"},{default:t(()=>[l(p,{modelValue:s(V),"onUpdate:modelValue":e[2]||(e[2]=o=>u(V)?V.value=o:null),color:"primary",label:"Nom",variant:"outlined","hide-details":"",disabled:"",density:"compact"},null,8,["modelValue"])]),_:1}),l(i,{cols:"12",sm:"7"},{default:t(()=>[l(p,{modelValue:s(N),"onUpdate:modelValue":e[3]||(e[3]=o=>u(N)?N.value=o:null),color:"primary",label:"Prénoms",variant:"outlined","hide-details":"",disabled:"",density:"compact"},null,8,["modelValue"])]),_:1}),l(i,{cols:"12",sm:"5"},{default:t(()=>[l(p,{modelValue:s(_),"onUpdate:modelValue":e[4]||(e[4]=o=>u(_)?_.value=o:null),color:"primary",label:"CNI",variant:"outlined","hide-details":"",disabled:"",density:"compact"},null,8,["modelValue"])]),_:1}),l(i,{cols:"12",sm:"4"},{default:t(()=>[l(p,{modelValue:s(y),"onUpdate:modelValue":e[5]||(e[5]=o=>u(y)?y.value=o:null),color:"primary",label:"Date de naissance",variant:"outlined","hide-details":"",disabled:"",density:"compact"},null,8,["modelValue"])]),_:1}),l(i,{cols:"12",sm:"3"},{default:t(()=>[l(p,{modelValue:s(b),"onUpdate:modelValue":e[6]||(e[6]=o=>u(b)?b.value=o:null),color:"primary",label:"Sexe",variant:"outlined","hide-details":"",disabled:"",density:"compact"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(i,{cols:"12",lg:"7"},{default:t(()=>[l(A,{elevation:4,rounded:"",height:"100%",class:"pa-4"},{default:t(()=>[e[18]||(e[18]=m("h4",{class:"mb-3"},"Documents requis pour initier la procédure",-1)),l(U,null,{default:t(()=>[l(i,{cols:"12"},{default:t(()=>[l(r,{label:"CNI du client",file:s(C),"onUpdate:file":e[7]||(e[7]=o=>u(C)?C.value=o:null)},null,8,["file"])]),_:1}),l(i,{cols:"12"},{default:t(()=>[l(r,{label:"Casier judiciaire",file:s(E),"onUpdate:file":e[8]||(e[8]=o=>u(E)?E.value=o:null)},null,8,["file"])]),_:1}),l(i,{cols:"12"},{default:t(()=>[l(r,{label:"Bail",file:s(I),"onUpdate:file":e[9]||(e[9]=o=>u(I)?I.value=o:null)},null,8,["file"])]),_:1}),l(i,{cols:"12"},{default:t(()=>[l(r,{label:"Croquis de la situation géographique",file:s(g),"onUpdate:file":e[10]||(e[10]=o=>u(g)?g.value=o:null)},null,8,["file"])]),_:1}),l(i,{cols:"12"},{default:t(()=>[l(r,{label:"Fiche à renseigner de la société à constituer",file:s(D),"onUpdate:file":e[11]||(e[11]=o=>u(D)?D.value=o:null)},null,8,["file"])]),_:1}),l(i,{cols:"12"},{default:t(()=>[l(r,{label:"Capital à libérer",file:s(T),"onUpdate:file":e[12]||(e[12]=o=>u(T)?T.value=o:null)},null,8,["file"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),m("div",le,[l(S,{color:"primary",class:"text-none","prepend-icon":"mdi-content-save-outline",onClick:L},{default:t(()=>e[19]||(e[19]=[R(" Enregistrer la procédure ")])),_:1}),l(P,{text:"Voulez vous enregistrer la procédure de constitution de société ?",open:s($),"onUpdate:open":e[13]||(e[13]=o=>$.value=o)},null,8,["open"])])],64)}}};export{Ve as default};
